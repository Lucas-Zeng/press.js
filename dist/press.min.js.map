{"version":3,"sources":["press.js"],"names":["factory","define","amd","$","kungfu","window","YBase","Zepto","Jquery","_on","fn","on","event","capture","apply","this","arguments","ua","navigator","userAgent","toLowerCase","options","delay","duration","test","moveArea","fnPress","onpress","fnPressed","onpressed","fnPressCancel","onpresscancel","Array","prototype","forEach","call","elm","x","y","isFnStarted","kf","hit","drinks","fn_touchStart","e","changedTouches","clientX","clientY","preventDefault","perform","fn_touchMove","_x","_y","hasMoved","status","die","reason","fn_touchEnd","click","css","-webkit-touch-callout","touch-callout","-webkit-user-select","-khtml-user-select","-moz-user-select","-ms-user-select","user-select","addEventListener","push"],"mappings":"CAAE,SAAUA,GAEc,kBAAXC,SAAyBA,OAAOC,IAEvCD,QAAS,QAAS,UAAY,SAAUE,EAAIC,GAExCJ,EAASG,EAAIC,KAMjBJ,EAASK,OAAOC,OAASD,OAAOE,OAASF,OAAOG,OAAQH,OAAOD,SAIrE,SAAUD,EAAIC,GAEI,mBAAND,KAEbM,IAAMN,EAAEO,GAAGC,GAEXR,EAAEO,GAAGC,GAAK,SAAUC,EAAOF,EAAKG,GAE/B,GAAc,UAAVD,EAsIH,MAFAH,KAAIK,MAAOC,KAAOC,WAEXD,IApIP,IAAkB,gBAAPL,GAAX,CAEA,GAAIO,GAAUC,UAAUC,UAAUC,cACjCC,EAAaX,EACbY,GAAYD,EAAQC,OAAS,EAC7BC,EAAa,UAAUC,KAAKP,KAASI,EAAQE,UAAY,GAAM,KAAOF,EAAQE,UAAY,EAC1FE,GAAcJ,EAAQI,UAAY,EAClCC,EAAwC,kBAApBL,GAAQM,QAAyBN,EAAQM,QAAU,aACvEC,EAA4C,kBAAtBP,GAAQQ,UAA2BR,EAAQQ,UAAY,aAC7EC,EAAiD,kBAA1BT,GAAQU,cAA+BV,EAAQU,cAAgB,YAEvFC,OAAMC,UAAUC,QAAQC,KAAMpB,KAAM,SAAUqB,GAE7C,GA8ECC,GAAGC,EA9EAC,GAAc,EAEjBC,EAAKpC,IAASqC,IAAK,WAElBF,GAAc,EAEdb,EAAQS,KAAMC,EAAMrB,KAAK2B,SAEtBpB,GAAQmB,IAAK,WAEhBb,EAAUO,KAAMC,EAAMrB,KAAK2B,QAE3BH,GAAc,GAEXhB,GAEJoB,EAAgB,SAASC,GAExBP,EAAIO,EAAEC,eAAgB,GAAIC,QAC1BR,EAAIM,EAAEC,eAAgB,GAAIE,QAE1BH,EAAEI,iBAEFT,GAAc,EAEdC,EAAGS,WAIJC,EAAe,SAAUN,GAExB,GAAIO,GAAKP,EAAEC,eAAgB,GAAIC,QAAUT,EACxCe,EAAKR,EAAEC,eAAgB,GAAIE,QAAUT,CACrCe,UAAWF,EAAKA,EAAKC,EAAKA,EAAK3B,EAAWA,EAEzB,SAAde,EAAGc,QAAqBD,WAE3Bb,EAAGe,MAEc,QAAbf,EAAGc,SAENV,EAAEY,OAAS,QAEX1B,EAAcK,KAAMpB,KAAO6B,MAQ9Ba,EAAc,SAASb,GAEJ,SAAdJ,EAAGc,SAENd,EAAGe,MAEc,QAAbf,EAAGc,SAEFf,GAEHK,EAAEY,OAAS,OAEX1B,EAAcK,KAAMpB,KAAO6B,IAI3B7B,KAAK2C,UAaVvD,GAAGiC,GAAMuB,KAERC,wBAAwB,OACxBC,gBAAgB,OAChBC,sBAAsB,OACtBC,qBAAqB,OACrBC,mBAAmB,OACnBC,kBAAkB,OAClBC,cAAc,SAIf9B,EAAI+B,iBAAkB,aAAcxB,GAEpCP,EAAI+B,iBAAkB,YAAcjB,GAEpCd,EAAI+B,iBAAkB,WAAYV,GAEtBrB,EAAIxB,QAAWwB,EAAIxB,UAEzBwB,EAAIxB,MAAoB,aAAOwB,EAAIxB,MAAmB,eAEtDwB,EAAIxB,MAAmB,YAAQwB,EAAIxB,MAAkB,cAErDwB,EAAIxB,MAAkB,WAASwB,EAAIxB,MAAgB,aAEnDwB,EAAIxB,MAAoB,WAAEwD,KAAMzB,GAEhCP,EAAIxB,MAAmB,UAAEwD,KAAMlB,GAE/Bd,EAAIxB,MAAkB,SAAEwD,KAAMX","file":"press.min.js","sourcesContent":[";(function (factory) {\r\n\r\n    if (typeof define === \"function\" && define.amd) {\r\n       \r\n        define([ 'ybase', 'kungfu' ], function( $ , kungfu ){\r\n\r\n            factory( $ , kungfu );\r\n\r\n        });\r\n\r\n    } else {\r\n\r\n        factory( window.YBase || window.Zepto || window.Jquery, window.kungfu );\r\n\r\n    }\r\n    \r\n}(function( $ , kungfu ) {\r\n\r\n   if( typeof $ === 'undefined' )return;\r\n\t\r\n\t_on = $.fn.on;\r\n\r\n\t$.fn.on = function( event, fn , capture ) {\r\n\r\n\t\tif( event === 'press' ) {\r\n\r\n\t\t\tif( typeof fn !== 'object' ) return ;\r\n\r\n\t\t\tvar ua \t\t\t  = navigator.userAgent.toLowerCase(),\r\n\t\t\t\toptions \t  = fn,\r\n\t\t\t\tdelay\t\t  = +options.delay || 0,\r\n\t\t\t\tduration\t  = /android/.test(ua) ? ( +options.duration || 0 ) + 300 : +options.duration || 0,\r\n\t\t\t\tmoveArea\t  = +options.moveArea || 7,\r\n\t\t\t\tfnPress \t  = typeof options.onpress === 'function' ? options.onpress : function(){},\r\n\t\t\t\tfnPressed \t  = typeof options.onpressed === 'function' ? options.onpressed : function(){},\r\n\t\t\t\tfnPressCancel = typeof options.onpresscancel === 'function' ? options.onpresscancel : function(){};\r\n\r\n\t\t\tArray.prototype.forEach.call( this, function( elm ) { \r\n\r\n\t\t\t\tvar isFnStarted = false,\r\n\r\n\t\t\t\t\tkf = kungfu().hit( function() {\r\n\r\n\t\t\t\t\t\tisFnStarted = true;\r\n\r\n\t\t\t\t\t\tfnPress.call( elm , this.drinks );\r\n\r\n\t\t\t\t\t} , delay ).hit( function( ){\r\n\r\n\t\t\t\t\t\tfnPressed.call( elm , this.drinks );\r\n\r\n\t\t\t\t\t\tisFnStarted = false;\r\n\r\n\t\t\t\t\t} , duration ),\r\n\r\n\t\t\t\t\tfn_touchStart = function(e) {\r\n\r\n\t\t\t\t\t\tx = e.changedTouches[ 0 ].clientX;\r\n\t\t\t\t\t\ty = e.changedTouches[ 0 ].clientY;\r\n\r\n\t\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\t\tisFnStarted = false;\r\n\r\n\t\t\t\t\t\tkf.perform();\r\n\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\tfn_touchMove = function( e ){\r\n\r\n\t\t\t\t\t\tvar _x = e.changedTouches[ 0 ].clientX - x,\r\n\t\t\t\t\t\t\t_y = e.changedTouches[ 0 ].clientY - y;\r\n\t\t\t\t\t\t\thasMoved = _x * _x + _y * _y > moveArea * moveArea;\r\n\r\n\t\t\t\t\t\tif( kf.status !== 'dead' && hasMoved ){\r\n\r\n\t\t\t\t\t\t\tkf.die();\r\n\r\n\t\t\t\t\t\t\tif( kf.status == 'dead' ) {\r\n\r\n\t\t\t\t\t\t\t\te.reason = 'moved';\r\n\r\n\t\t\t\t\t\t\t\tfnPressCancel.call( this , e );\r\n\r\n\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\tfn_touchEnd = function(e){\r\n\r\n\t\t\t\t\t\tif( kf.status !== 'dead' ){\r\n\r\n\t\t\t\t\t\t\tkf.die();\r\n\r\n\t\t\t\t\t\t\tif( kf.status == 'dead' ) {\r\n\r\n\t\t\t\t\t\t\t\tif( isFnStarted ) {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\te.reason = 'left';\r\n\r\n\t\t\t\t\t\t\t\t\tfnPressCancel.call( this , e );\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\tthis.click();\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t}\t\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\r\n\t\t\t\t\tx, y;\r\n\r\n\t\t\t\t$( elm ).css({\r\n\r\n\t\t\t\t\t'-webkit-touch-callout':'none',\r\n\t\t\t\t\t'touch-callout':'none',\r\n\t\t\t\t\t'-webkit-user-select':'none',\r\n\t\t\t\t\t'-khtml-user-select':'none',\r\n\t\t\t\t\t'-moz-user-select':'none',\r\n\t\t\t\t\t'-ms-user-select':'none',\r\n\t\t\t\t\t'user-select':'none'\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\telm.addEventListener( 'touchstart', fn_touchStart );\r\n\r\n\t\t\t\telm.addEventListener( 'touchmove' , fn_touchMove );\r\n\r\n\t\t\t\telm.addEventListener( 'touchend', fn_touchEnd );\r\n\r\n                elm.event || ( elm.event = {} );\r\n\r\n\t\t        elm.event[ 'touchstart' ] || ( elm.event[ 'touchstart'] = [] ) ;\r\n\r\n\t\t        elm.event[ 'touchmove' ]  || ( elm.event[ 'touchmove'] = [] );\r\n\r\n\t\t        elm.event[ 'touchend' ]   || ( elm.event['touchend'] = [] );\r\n\r\n\t\t        elm.event[ 'touchstart' ].push( fn_touchStart );\r\n\r\n\t\t        elm.event[ 'touchmove' ].push( fn_touchMove );\r\n\r\n\t\t        elm.event[ 'touchend' ].push( fn_touchEnd );\r\n\r\n\r\n\t\t\t});\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_on.apply( this,  arguments ) ;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}));"],"sourceRoot":"/source/"}